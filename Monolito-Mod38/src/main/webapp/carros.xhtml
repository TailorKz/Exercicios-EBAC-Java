<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Cadastro de Carros</title>
</h:head>
<h:body>
    <p:growl id="growl" sticky="true" />

    <h3>Novo Carro</h3>
    <h:form id="formCadastro">
        <p:panelGrid columns="3">
            <p:outputLabel value="Marca:" for="marca"/>
            <p:inputText id="marca" value="#{carroController.carro.marca}" required="true"/>
            <p:message for="marca"/>

            <p:outputLabel value="Modelo:" for="modelo"/>
            <p:inputText id="modelo" value="#{carroController.carro.modelo}" required="true"/>
            <p:message for="modelo"/>

            <p:outputLabel value="Ano:" for="ano"/>
            <p:inputText id="ano" value="#{carroController.carro.anoFabricacao}" required="true"/>
            <p:message for="ano"/>
        </p:panelGrid>

        <p:commandButton value="Cadastrar" action="#{carroController.cadastrar}" update="formTabela growl @form" rendered="#{!carroController.isUpdate}"/>
        <p:commandButton value="Atualizar" action="#{carroController.atualizar}" update="formTabela growl @form" rendered="#{carroController.isUpdate}"/>
        <p:commandButton value="Cancelar" action="#{carroController.cancel}" update="@form" immediate="true" style="margin-left: 10px;"/>
    </h:form>

    <br/>

    <h3>Carros Cadastrados</h3>
    <h:form id="formTabela">
        <p:dataTable var="car" value="#{carroController.carros}">
            <p:column headerText="Marca">
                <h:outputText value="#{car.marca}" />
            </p:column>
            <p:column headerText="Modelo">
                <h:outputText value="#{car.modelo}" />
            </p:column>
            <p:column headerText="Ano">
                <h:outputText value="#{car.anoFabricacao}" />
            </p:column>
            <p:column headerText="Ações">
                <p:commandButton value="Editar" action="#{carroController.editar(car)}" update=":formCadastro"/>
                <p:commandButton value="Excluir" action="#{carroController.excluir(car)}" update="@form" style="margin-left: 10px;">
                    <p:confirm header="Confirmação" message="Deseja realmente excluir este carro?" icon="pi pi-exclamation-triangle"/>
                </p:commandButton>
            </p:column>
        </p:dataTable>
    </h:form>

    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
        <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
        <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no ui-button-secondary" icon="pi pi-times" />
    </p:confirmDialog>

</h:body>
</html>